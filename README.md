В функции конвертации ошибка, при назначении 'type' тернарный оператор работает наоборот.
То есть, когда isForeign == true у нас всегда null и, когда isForeign == false у нас всегда 'foreign'.